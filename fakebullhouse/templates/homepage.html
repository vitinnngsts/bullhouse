<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>CARD√ÅPIO BULL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

body {
    margin: 0;
    background: #000;
    color: white;
}

/* ===== HERO ===== */
.hero {
    min-height: 100vh;
    padding: 30px 20px 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.hero img {
    max-width: 260px;
    margin: 20px 0;
}

.hero h1 {
    color: #c10000;
    font-size: 42px;
    margin-bottom: 20px;
    letter-spacing: 2px;
}

/* ===== BOT√ïES ===== */
.btn {
    width: 100%;
    max-width: 320px;
    padding: 16px;
    margin: 10px 0;
    font-size: 18px;
    font-weight: bold;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background: #c10000;
    color: white;
}

/* ===== MODAIS ===== */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    overflow-y: auto;
    z-index: 100;
}

.modal-content {
    background: #111;
    width: 95%;
    max-width: 1000px;
    margin: 40px auto;
    padding: 20px;
    border-radius: 16px;
    position: relative;
}

.close {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 26px;
    cursor: pointer;
}

/* ===== CARDS ===== */
.cardapio {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 15px;
}

.card {
    background: #1a1a1a;
    padding: 15px;
    border-radius: 14px;
    cursor: pointer;
}

.card img {
    width: 100%;
    max-height: 160px;
    object-fit: contain;
}

.card h3 {
    color: #c10000;
    margin: 8px 0;
}

.card strong {
    display: block;
    margin-top: 8px;
}

/* ===== CARRINHO FLOAT ===== */
.carrinho-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background: #c10000;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    cursor: pointer;
    z-index: 200;
}

.carrinho-float span {
    position: absolute;
    top: -6px;
    right: -6px;
    background: white;
    color: black;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    font-size: 12px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ===== MODAL CARRINHO ===== */
.carrinho-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #333;
}

.carrinho-item button {
    background: none;
    border: none;
    color: red;
    font-size: 18px;
    cursor: pointer;
}

.total {
    font-size: 20px;
    margin: 15px 0;
}

.finalizar {
    width: 100%;
    padding: 14px;
    background: #c10000;
    border: none;
    border-radius: 12px;
    font-size: 18px;
    color: white;
}
</style>
</head>

<body>

<div class="hero">
    <img src="{{ url_for('static', filename='logo/touro.png') }}">
    <h1>BULL HOUSE</h1>

    <button class="btn" onclick="abrirModal('hamburgueres')">üçî Hamb√∫rgueres</button>
    <button class="btn" onclick="abrirModal('porcoes')">üçü Por√ß√µes</button>
</div>

<!-- ===== MODAL HAMBURGUERES ===== -->
<div id="hamburgueres" class="modal">
<div class="modal-content">
<span class="close" onclick="fecharModal('hamburgueres')">&times;</span>

<div class="cardapio">
{% for produto in produtos_hamburguer %}
<div class="card" onclick="addCarrinho({{ produto.id }}, '{{ produto.nome }}')">
<img src="{{ url_for('static', filename='hamburgueres/' + produto.imagem) }}">
<h3>{{ produto.nome }}</h3>
<p>{{ produto.descricao }}</p>
<strong>R$ {{ produto.preco }}</strong>
</div>
{% endfor %}
</div>
</div>
</div>

<!-- ===== MODAL POR√á√ïES ===== -->
<div id="porcoes" class="modal">
<div class="modal-content">
<span class="close" onclick="fecharModal('porcoes')">&times;</span>

<div class="cardapio">
{% for produto in produtos_porcoes %}
<div class="card" onclick="addCarrinho({{ produto.id }}, '{{ produto.nome }}')">
<img src="{{ url_for('static', filename='porcoes/' + produto.imagem) }}">
<h3>{{ produto.nome }}</h3>
<p>{{ produto.descricao }}</p>
<strong>R$ {{ produto.preco }}</strong>
</div>
{% endfor %}
</div>
</div>
</div>

<!-- ===== MODAL CARRINHO ===== -->
<div id="modal-carrinho" class="modal">
<div class="modal-content">
<span class="close" onclick="fecharModal('modal-carrinho')">&times;</span>

<h2>üõí Seu carrinho</h2>
<div id="lista-carrinho"></div>

<p class="total">Total: R$ <span id="total">0.00</span></p>

<a href="/checkout">
    <button class="finalizar">Finalizar Pedido</button>
</a>
</div>
</div>

<div class="carrinho-float" onclick="abrirModal('modal-carrinho')">
üõí <span id="qtd">0</span>
</div>

<script>
function abrirModal(id){ document.getElementById(id).style.display="block"; }
function fecharModal(id){ document.getElementById(id).style.display="none"; }

function addCarrinho(id, nome){
    fetch("/add_carrinho",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({id,nome,quantidade:1})
    }).then(atualizarCarrinho);
}

function atualizarCarrinho(){
    fetch("/get_carrinho").then(r=>r.json()).then(c=>{
        const lista=document.getElementById("lista-carrinho");
        lista.innerHTML="";
        let total=0,q=0;

        c.forEach(i=>{
            q+=i.quantidade;
            const div=document.createElement("div");
            div.className="carrinho-item";
            div.innerHTML=`${i.nome} x${i.quantidade}
            <button onclick="remover(${i.id})">‚ùå</button>`;
            lista.appendChild(div);
        });

        document.getElementById("qtd").innerText=q;
        fetch("/total").then(r=>r.json()).then(d=>{
            document.getElementById("total").innerText=d.total.toFixed(2);
        });
    });
}

function remover(id){
    fetch("/remover_carrinho",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({id})
    }).then(atualizarCarrinho);
}

window.onload=atualizarCarrinho;
</script>

</body>
</html>
